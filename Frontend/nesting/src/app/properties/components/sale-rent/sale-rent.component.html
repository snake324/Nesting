<div id="mainDiv" class="container-fluid">
  <div id="backDiv" class="container-fluid">
    <button id="backBtn" type="button" class="btn" (click)="goBack()">
      <img class="img-fluid" id="iconSvg" src="../../../../assets/icons/backw.svg"> Atrás
    </button>
  </div>


<h1>Formulario de Venta/Alquiler</h1>
<form [formGroup]="propertyForm" (ngSubmit)="onSubmit()" *ngIf="showForm">
  <div class="row">
    <div class="col-12 col-lg-3">
      <input
        type="text"
        class="form-control custom-input"
        placeholder="Título propiedad"
        formControlName="title"
        id="dropdowI"
      />
    </div>
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="dropdowI"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          {{ selectedPropertyType }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="propertyTypeDropdown">
          <li *ngFor="let housetype of houseTypes">
            <a class="dropdown-item" (click)="selectPropertyType(housetype)">
              {{ housetype }}
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="dropdowI"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          {{ selectedTransactionType }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="transactionTypeDropdown">
          <li *ngFor="let type of types">
            <a class="dropdown-item" (click)="selectTransactionType(type)">{{
              type
            }}</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="dropdowI"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          {{ getCityValue() }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="cityDropdown">
          <li *ngFor="let city of cities">
            <a class="dropdown-item" (click)="selectCity(city.name)">{{
              city.name
            }}</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="dropdowI"
          data-bs-toggle="dropdown"
          [disabled]="!propertyForm.get('city')?.value"
          aria-expanded="false"
        >
          {{ getPostalCodeValue() }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="postalCodeDropdown">
          <li>
            <a class="dropdown-item" (click)="selectPostalCode('')">Código postal</a>
          </li>
          <li *ngFor="let code of filteredPostalCodes">
            <a class="dropdown-item" (click)="selectPostalCode(code)">{{ code }}</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="dropdowI"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          {{ selectedBedrooms }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="bedroomsDropdown">
          <li>
            <a class="dropdown-item" (click)="selectBedrooms('0')">Habitaciones</a>
          </li>
          <li *ngFor="let room of bedroomsOptions.slice(1)">
            <a class="dropdown-item" (click)="selectBedrooms(room)">{{ room }}</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-3">
      <div class="dropdown">
        <button
          class="btn btn-secondary dropdown-toggle"
          type="button"
          id="dropdowI"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          {{ selectedBathrooms }}
        </button>
        <ul class="dropdown-menu" aria-labelledby="bathroomsDropdown">
          <li>
            <a class="dropdown-item" (click)="selectBathrooms('0')">Baños</a>
          </li>
          <li *ngFor="let bath of bathroomsOptions.slice(1)">
            <a class="dropdown-item" (click)="selectBathrooms(bath)">{{ bath }}</a>
          </li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-lg-3">
      <input
        type="text"
        class="form-control custom-input"
        placeholder="Superficie"
        formControlName="size"
        id="inputB"
      />
    </div>
    <div class="col-12 col-lg-3">
      <input
        type="text"
        class="form-control custom-input"
        placeholder="Importe €"
        formControlName="price"
        id="inputB"
      />
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-lg-3">
      <input
        type="text"
        class="form-control custom-input"
        placeholder="Direccion"
        formControlName="address"
        id="inputB"
      />
    </div>
    <div class="col-12 col-lg-3">
      <div class="form-check">
        <input
          class="form-check-input"
          type="checkbox"
          value=""
          aria-label="Checkbox for following text input"
          id="inputB"
        />
        <label id="address" class="form-check-label" for="invalidCheck2">
          Publicar dirección
        </label>
      </div>
    </div>
    <div class="col-12 col-lg-6">
      <div id="imgInp" class="input-group mb-3">
        <label id="imgLabel" class="input-group-text" for="inputGroupFile01">Upload</label>
        <input id="imgForm" type="file" class="form-control" id="inputGroupFile01">
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-lg-6">
      <label for="description">Descripción</label>
      <textarea
        id="description"
        name="description"
        rows="6"
        formControlName="description"
        class="form-control"
        placeholder="Descripción de la propiedad..."
      ></textarea>
    </div>
    <div id="btnDiv" class="col-12 col-lg-3" >
      <button type="submit" class="save btn btn-primary" id="liveAlertBtn">Publicar</button>      
    </div>
  </div>
  
</form>

<div id="liveAlertPlaceholder">
  <div id="alertDiv" *ngIf="alertMessage" class="alert alert-{{ alertType }} alert-dismissible fadeInOut" role="alert">
    <img class="img-fluid" id="gif" src="../../../../assets/icons/yes.gif">
    <div><p id="alertP"> {{ alertMessage }}</p></div>
  </div>
</div>
</div>
